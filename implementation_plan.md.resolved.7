# Implementation Plan - Version 2.0 Upgrade

## Goal
Build a Professional Grade Trading Terminal with full control over the bot, detailed analytics, and robust risk management settings.

## User Review Required
- **Config Persistence**: Settings will be saved to [config.json](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/frontend/tsconfig.json) so they persist across restarts.
- **Kill Switch**: The "STOP ALL TRADING" button will set `is_trading_allowed = False` in the backend, preventing NEW entries. It will NOT auto-close existing positions (safety choice), but user can manually close them via the "Active Trades" UI.

## Components

### 1. Backend (Python/FastAPI)
- **`config.py`**:
    -   Load/Save settings to [config.json](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/frontend/tsconfig.json).
    -   Default Logic: Max Trades=3, SL=1%, TP=2%, Time=14:45.
- **[api.py](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/api.py) Extensions**:
    -   `GET /settings`, `POST /settings`
    -   `POST /trade/close/{symbol}`
    -   `POST /bot/kill-switch`
    -   `GET /logs?filter=...`
- **[main.py](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/main.py) Refactor**:
    -   Adopt `config` object instead of hardcoded constants.
    -   Push logs to a shared `LogBuffer` for the API to read.
    -   Track "Skipped Trades" (Signal valid but skipped due to limits/rules).

### 2. Frontend (Next.js)
- **Layout**: `Sidebar` component.
- **Pages**:
    -   `/`: Dashboard (Stats, Heatmap).
    -   `/messages`: Live Signals (Table with "Reason" columns).
    -   `/trades`: Active Position Cards (Visual Progress Bar).
    -   `/journal`: Simple Trade History list (v1 Journal).
    -   `/settings`: Inputs for Config.
    -   `/logs`: Log Console.
- **UX**:
    -   **Toast Notifications**: For Trade Entries/Exits.
    -   **Sound**: Audio beep on new signal.

## Verification Plan
1.  **Settings Test**: Change SL% in frontend -> Verify [main.py](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/main.py) logic changes.
2.  **Kill Switch Test**: Activate -> Ensure no new buys occur.
3.  **Manual Exit**: Click "Exit" on UI -> Verify Sell Order triggered in backend.
