# Implementation Plan - IntradayScreener Bot

## Goal
Build an automated trading system that scrapes sector performance data from `intradayscreener.com`, identifies positive sectors, and trades stocks within those sectors based on VWAP and EMA 20 indicators (15-min timeframe) using Angel One SmartAPI.

## User Review Required
- **Dry Run Mode**: I have enabled `DRY_RUN = True` by default. Change this to `False` in `main.py` when ready to place real orders.
- **Instrument Map**: The bot downloads the Angel One instrument map on startup to map Symbols (e.g. "INFY") to Tokens. This takes a few seconds.

## Components
### 1. Scraper ([scraper.py](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/scraper.py))
- Fetches top positive sectors from IntradayScreener.
- Fetches individual stocks for those sectors.

### 2. SmartAPI Helper ([smart_api_helper.py](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/smart_api_helper.py))
- Handles Login (TOTP, API Key).
- Fetches 15-minute historical candle data.
- Maps Symbols to Tokens.

### 3. Indicators ([indicators.py](file:///C:/Users/Ashbin/.gemini/antigravity/brain/2df2ed12-f98d-4c89-bf98-dea5fc2acbc3/indicators.py))
- Calculates EMA 20 and VWAP using `pandas_ta`.
- Checks Buy Condition: `Price > VWAP` and `Price > EMA 20`.

### 4. Main Controller (`main.py`)
- **Initialization**: Connects to SmartAPI, loads Token Map.
- **Loop**:
    1.  Get Positive Sectors.
    2.  For each stock in top sectors:
        - Check if we have a valid token.
        - Fetch Data.
        - Check Indicators.
        - **Execute**: If condition met -> Place Order (Log if Dry Run).
    3.  Sleep/Wait (prevent rate limits).

## Verification Plan
### Automated Tests
- Run `main.py` in Dry Run mode.
- Verify log output shows "Buy Signal detected" for stocks matching conditions.
- Verify "Placed Order" log messages.
